<UserControl
  x:Class="IconPackBuilder.Views.EditorRoot"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="using:IconPackBuilder.Views"
  xmlns:vm="using:IconPackBuilder.ViewModels"
  xmlns:utu="using:Uno.Toolkit.UI"
  xmlns:suxc="using:Singulink.UI.Xaml.Converters">

  <Grid RowDefinitions="Auto,*" ColumnDefinitions="*,280">
    <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Spacing="6" Margin="10" HorizontalAlignment="Left">
      <MenuBar VerticalAlignment="Center">
        <MenuBarItem Title="Menu">
          <MenuFlyoutItem Text="Save" Command="{x:Bind Model.SaveProjectCommand}" />
          <MenuFlyoutItem Text="Export" Command="{x:Bind Model.ExportProjectCommand}" />
          <MenuFlyoutSeparator />
          <MenuFlyoutItem Text="Close Project" Command="{x:Bind Model.CloseCommand}" />
        </MenuBarItem>
      </MenuBar>
      <TextBox PlaceholderText="Filter" VerticalAlignment="Center" Width="200"
               Text="{x:Bind Model.NameFilter, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
      <ComboBox ItemsSource="{x:Bind Model.IconsSource.Variants}" SelectedItem="{x:Bind Model.VariantFilter, Mode=TwoWay}" VerticalAlignment="Center"/>
      <CheckBox Content="With RTL Only" IsChecked="{x:Bind Model.WithRtlVersionsOnlyFilter, Mode=TwoWay}" HorizontalAlignment="Center"/>
      <Grid Padding="10,3" Margin="0,3" CornerRadius="3" Background="#11FFFFFF" VerticalAlignment="Stretch">
        <TextBlock Text="{x:Bind Model.ProjectName, Mode=OneWay}" VerticalAlignment="Center"/>
      </Grid>
    </StackPanel>

    <GridView Grid.Row="1" Grid.Column="0" ItemsSource="{x:Bind Model.FilteredIconGroups, Mode=OneWay}" SelectionMode="Single"
              SelectedItem="{x:Bind Model.SelectedIconGroup, Mode=TwoWay}" HorizontalAlignment="Center">
      <GridView.ItemContainerStyle>
        <Style TargetType="GridViewItem" BasedOn="{StaticResource DefaultGridViewItemStyle}">
          <Setter Property="Margin" Value="0,0,8,4"/>
        </Style>
      </GridView.ItemContainerStyle>
      <GridView.ItemTemplate>
        <DataTemplate x:DataType="vm:IconGroupModel">
          <Grid Background="#111111">
            <Grid Background="#2235C759" Visibility="{x:Bind suxc:Visible.IfTrue(HasSelectedIcons), Mode=OneWay}">
              <Ellipse Width="8" Height="8" Fill="#35C759" StrokeThickness="0" Margin="4"
                       HorizontalAlignment="Right" VerticalAlignment="Top"/>
            </Grid>
            <StackPanel Orientation="Horizontal" Spacing="8" Margin="4,4,14,4">
              <FontIcon Glyph="{x:Bind ActiveIconInfo.Glyph, Mode=OneWay}" FontSize="32" Width="32" Height="32"
                        FontFamily="{utu:AncestorBinding AncestorType=UserControl, Path=IconFontFamily}" />
              <TextBlock Text="{x:Bind Info.Name}" TextWrapping="Wrap" TextTrimming="CharacterEllipsis" MaxLines="2"
                         Width="110" FontSize="10" VerticalAlignment="Center"/>
            </StackPanel>
          </Grid>
        </DataTemplate>
      </GridView.ItemTemplate>
    </GridView>

    <ContentControl Grid.Row="1" Grid.Column="1" Content="{x:Bind Model.SelectedIconGroup, Mode=OneWay}" HorizontalContentAlignment="Stretch">
      <ContentControl.ContentTemplate>
        <DataTemplate x:DataType="vm:IconGroupModel">
          <StackPanel Padding="8" Spacing="8">
            <TextBlock Text="{x:Bind Info.Name}" FontWeight="Bold" FontSize="16" TextWrapping="Wrap"/>
            <TextBox Header="Export name" Text="{x:Bind ExportName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <ItemsRepeater ItemsSource="{x:Bind Icons}">
              <ItemsRepeater.ItemTemplate>
                <DataTemplate x:DataType="vm:IconModel">
                  <CheckBox IsChecked="{x:Bind IsSelected, Mode=TwoWay}" Margin="0,0,0,10">
                    <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                      <FontIcon Glyph="{x:Bind Info.Glyph}" FontSize="28" Width="28" Height="28"
                                FontFamily="{utu:AncestorBinding AncestorType=UserControl, Path=IconFontFamily}"/>
                      <FontIcon Glyph="{x:Bind Info.RtlGlyph}" FontSize="28" Width="28" Height="28"
                                FontFamily="{utu:AncestorBinding AncestorType=UserControl, Path=IconFontFamily}"
                                Visibility="{x:Bind suxc:Visible.IfNotNull(Info.RtlGlyph)}"/>
                      <TextBlock Text="{x:Bind Info.Variant}" VerticalAlignment="Center"/>
                    </StackPanel>
                  </CheckBox>
                </DataTemplate>
              </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>
          </StackPanel>
        </DataTemplate>
      </ContentControl.ContentTemplate>
    </ContentControl>
  </Grid>
</UserControl>
